<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3D Bag Pattern Generator</title>
</head>
<body style="text-align: center; font-family: sans-serif;">
    <h1>Select Items to Include in Your Bag</h1>
    <form id="patternForm">
        <label><input type="checkbox" name="objects" value="phone"> Phone</label><br>
        <label><input type="checkbox" name="objects" value="lipstick"> Lipstick</label><br>
        <label><input type="checkbox" name="objects" value="hairbrush"> Hairbrush</label><br>
        <label><input type="checkbox" name="objects" value="sunglasses"> Sunglasses</label><br>
        <label><input type="checkbox" name="objects" value="journal"> Journal</label><br>
        <label><input type="checkbox" name="objects" value="water_bottle"> Water Bottle</label><br>
        <label><input type="checkbox" name="objects" value="passport"> Passport</label><br>
        <label><input type="checkbox" name="objects" value="planner"> Planner</label><br>
        <label><input type="checkbox" name="objects" value="charger_brick"> Charger Brick</label><br>
        <label><input type="checkbox" name="objects" value="ipad_mini"> iPad Mini</label><br><br>

        <label><input type="checkbox" name="include_straps"> Include Straps</label><br><br>
        <button type="submit">Generate Pattern</button>
    </form>

    <div id="patternContainer" style="margin-top: 40px;"></div>

    <script>
        document.getElementById('patternForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const checkboxes = document.querySelectorAll('input[name="objects"]:checked');
            const objects = Array.from(checkboxes).map(cb => cb.value);
            const include_straps = document.querySelector('input[name="include_straps"]').checked;

            fetch('/generate-pattern', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ objects: objects, include_straps: include_straps })
            })
            .then(res => res.json())
            .then(data => {
                if (data.svg) {
                    document.getElementById('patternContainer').innerHTML =
                        `<object type="image/svg+xml" data="data:image/svg+xml;base64,${btoa(data.svg)}" width="800"></object>`;
                } else {
                    document.getElementById('patternContainer').textContent = "Error: " + data.error;
                }
            });
        });
    </script>
</body>
</html>
